<!DOCTYPE html>
<html lang="fi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hae ja tutki - LaukaaInfo</title>
    <meta name="description" content="Hae ja analysoi kunnan p√§√§t√∂ksi√§ ja asioita.">
    <link rel="icon" href="logo.png">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0056b3">

    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <style>
        .disclaimer-card {
            background: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin-bottom: 2rem;
            border-radius: 4px;
            font-size: 0.95rem;
            color: #5d4037;
            line-height: 1.5;
        }

        .search-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .search-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .search-group label {
            font-weight: 600;
            font-size: 0.9rem;
            color: #333;
        }

        .search-group select {
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1rem;
            background: white;
        }

        .search-group select:focus {
            outline: none;
            border-color: #0056b3;
            box-shadow: 0 0 0 2px rgba(0, 86, 179, 0.2);
        }

        #embed-container {
            width: 100%;
            height: 800px;
            border: 1px solid #eee;
            border-radius: 12px;
            overflow: hidden;
            background: #f9f9f9;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        #embed-iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: none;
        }

        .placeholder-text {
            color: #666;
            text-align: center;
            padding: 2rem;
        }

        /* Highlight animation for updating iframe */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .inactive-option {
            font-style: italic;
            color: #888;
        }
    </style>
</head>

<body>
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="logo.png" alt="LaukaaInfo Logo">
                <span>LaukaaInfo</span>
            </div>
            <div class="desktop-nav">
                <ul class="nav-links">
                    <li class="nav-item">
                        <a href="#" class="nav-link">P√§√§t√∂sten polut <span class="arrow">‚ñº</span></a>
                        <ul class="dropdown-menu">
                            <li><a href="asiahaku.html">Hae ja tutki</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">Palvelut <span class="arrow">‚ñº</span></a>
                        <ul class="dropdown-menu">
                            <li class="has-arrow">
                                <a href="#">Yritykset</a>
                                <ul class="nested-menu">
                                    <li><a href="index.html#company-spotlight">Tekstihaku</a></li>
                                    <li><a href="index.html#map-section">Karttahaku</a></li>
                                </ul>
                            </li>
                            <li><a href="index.html#events-card">Tapahtumat</a></li>
                            <li><a href="index.html#news-card">Tiedotteet</a></li>
                            <li><a href="index.html#decisions-card">P√§√§t√∂ksenteko</a></li>
                            <li><a href="index.html#feedback-card">Palautteet</a></li>
                            <li class="has-arrow">
                                <a href="#">Taajamat</a>
                                <ul class="nested-menu">
                                    <li><a href="lievestuore.html">Lievestuore</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">Kartat & El√§mykset <span class="arrow">‚ñº</span></a>
                        <ul class="dropdown-menu">
                            <li><a href="tarinakartta.html">Tarinakartta</a></li>
                            <li><a href="muistokartta.html">Muistokartta</a></li>
                            <li><a href="kadonneet.html">Kadonneet & l√∂ydetyt</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <button class="hamburger" id="hamburger-btn" aria-label="Avaa valikko">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- Sidebar Menu -->
    <aside class="sidebar-menu" id="sidebar-menu">
        <div class="sidebar-header">
            <h2>LaukaaInfo</h2>
            <button class="close-btn" id="close-sidebar-btn" aria-label="Sulje valikko">&times;</button>
        </div>

        <div class="sidebar-content">
            <!-- P√§√§osio: P√Ñ√ÑT√ñSTEN POLUT -->
            <div class="menu-section">
                <h3 class="section-title">P√Ñ√ÑT√ñSTEN POLUT</h3>
                <ul class="menu-list">
                    <li class="menu-item"><a href="asiahaku.html" class="sidebar-link active">Hae ja tutki</a></li>
                </ul>
            </div>

            <!-- Osio: PALVELUT -->
            <div class="menu-section">
                <h3 class="section-title">PALVELUT</h3>
                <ul class="menu-list">
                    <li class="menu-item has-submenu">
                        <a href="#" class="submenu-toggle">Yritykset <span class="arrow">‚ñº</span></a>
                        <ul class="submenu">
                            <li><a href="index.html#company-spotlight" class="sidebar-link">Tekstihaku</a></li>
                            <li><a href="index.html#map-section" class="sidebar-link">Karttahaku</a></li>
                        </ul>
                    </li>
                    <li class="menu-item"><a href="index.html#events-card" class="sidebar-link">Tapahtumat</a></li>
                    <li class="menu-item"><a href="index.html#news-card" class="sidebar-link">Tiedotteet</a></li>
                    <li class="menu-item"><a href="index.html#decisions-card" class="sidebar-link">P√§√§t√∂ksenteko</a>
                    </li>
                    <li class="menu-item"><a href="index.html#feedback-card" class="sidebar-link">Palautteet</a></li>
                    <li class="menu-item has-submenu">
                        <a href="#" class="submenu-toggle">Taajamat <span class="arrow">‚ñº</span></a>
                        <ul class="submenu">
                            <li><a href="lievestuore.html" class="sidebar-link">Lievestuore</a></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <!-- Korostettu osio: KARTAT & EL√ÑMYKSET -->
            <div class="menu-section highlight-section">
                <h3 class="section-title">KARTAT & EL√ÑMYKSET ‚≠ê</h3>
                <ul class="menu-list">
                    <li class="menu-item"><a href="tarinakartta.html" class="sidebar-link">Tarinakartta</a></li>
                    <li class="menu-item"><a href="muistokartta.html" class="sidebar-link">Muistokartta</a></li>
                    <li class="menu-item"><a href="kadonneet.html" class="sidebar-link">Kadonneet & l√∂ydetyt</a></li>
                </ul>
            </div>
        </div>
    </aside>

    <header>
        <div class="header-content">
            <h1>P√§√§t√∂sten polut</h1>
            <p>P√§√§t√∂sten ja asioiden teko√§lyavusteinen analyysi</p>
        </div>
    </header>

    <main>
        <div class="disclaimer-card">
            <p><strong>P√§√§t√∂sten polut</strong> kokoaa kunnan avoimista p√∂yt√§kirjoista ja p√§√§t√∂ksist√§ selkeit√§
                koosteita, visualisointeja ja trendianalyysej√§. Analyyseissa voidaan hy√∂dynt√§√§ l√§htein√§ my√∂s julkisia
                uutisia, tutkimuksia ja muita luotettavia aineistoja, ja k√§ytetyt l√§hteet on merkitty mukaan linkkein√§.
                Tavoitteena on lis√§t√§ l√§pin√§kyvyytt√§, helpottaa kuntalaisten ymm√§rryst√§ ja tukea rakentavaa julkista
                keskustelua. Palvelu tiivist√§√§ olennaisen ‚Äî mit√§ p√§√§tettiin ja mihin suuntaan ollaan menossa ‚Äî rennolla
                mutta asiallisella otteella.</p>
            <p><small><strong>Huomautus:</strong> T√§m√§n sivun analyysit on tehty hy√∂dynt√§en julkisia l√§hdeaineistoja ja
                    teko√§ly√§. Niiss√§ voi esiinty√§ virheit√§ tai ep√§tarkkuuksia, joten tarkasta tieto aina alkuper√§isest√§
                    l√§hteest√§.</small></p>
        </div>

        <section class="card">
            <h2><span>üîç</span> Hakukriteerit</h2>

            <div class="search-grid">
                <div class="search-group">
                    <label for="category-select">Kategoria</label>
                    <select id="category-select">
                        <option value="">Valitse kategoria...</option>
                        <option value="kunnanhallitus">Kunnanhallitus</option>
                        <option value="kunnanvaltuusto" class="inactive-option">Kunnanvaltuusto (tulossa)</option>
                        <option value="tekninen" class="inactive-option">Tekninen lautakunta (tulossa)</option>
                    </select>
                </div>

                <div class="search-group">
                    <label for="issue-select">Asia / Ajankohta</label>
                    <select id="issue-select" disabled>
                        <option value="">Valitse ensin kategoria...</option>
                    </select>
                </div>

                <div class="search-group">
                    <label for="style-select">Esitystapa</label>
                    <select id="style-select">
                        <option value="suhteet">Aiheiden suhteet</option>
                        <option value="aikajana">Aikajana</option>
                    </select>
                </div>
            </div>

            <div id="embed-container">
                <div id="placeholder" class="placeholder-text">
                    <p>Valitse hakukriteerit n√§hd√§ksesi analyysin.</p>
                </div>
                <iframe id="embed-iframe" src="" title="Analyysi"></iframe>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <p>¬© 2026 LaukaaInfo ‚Äì Ep√§virallinen yhteis√∂sovellus</p>
            <div class="footer-links">
                <a href="index.html">Etusivulle</a>
                <a href="https://mediazoo.fi/yhteystiedot/">Yhteystiedot</a>
            </div>
        </div>
    </footer>

    <div class="demo-notification">
        Kyseess√§ ei ole virallinen sivu, vaan yksityinen palvelu ja se hy√∂dynt√§√§ avoimia, julkisia l√§hdetietoja
        sis√§ll√∂iss√§.
    </div>

    <script>
        const issueData = {
            'kunnanhallitus': [
                { id: '2026-02', text: 'Kokous helmikuu 2026', active: true },
                { id: '2026-01', text: 'Kokous tammikuu 2026' }
            ],
            'kunnanvaltuusto': [
                { id: '2026-02-v', text: 'Valtuusto helmikuu 2026' },
                { id: '2025-12-v', text: 'Valtuusto joulukuu 2025' }
            ],
            'tekninen': [
                { id: '2026-01-t', text: 'Lautakunta tammikuu 2026' }
            ]
        };

        const categorySelect = document.getElementById('category-select');
        const issueSelect = document.getElementById('issue-select');
        const styleSelect = document.getElementById('style-select');
        const iframe = document.getElementById('embed-iframe');
        const placeholder = document.getElementById('placeholder');

        categorySelect.addEventListener('change', () => {
            const category = categorySelect.value;
            issueSelect.innerHTML = '';

            if (category && issueData[category]) {
                issueSelect.disabled = false;
                issueSelect.innerHTML = '<option value="">Valitse asia...</option>';
                issueData[category].forEach(item => {
                    const opt = document.createElement('option');
                    opt.value = item.id;
                    opt.textContent = item.text + (item.active ? '' : ' (tulossa)');
                    if (!item.active) {
                        opt.classList.add('inactive-option');
                    }
                    issueSelect.appendChild(opt);
                });
            } else {
                issueSelect.disabled = true;
                issueSelect.innerHTML = '<option value="">Valitse ensin kategoria...</option>';
            }
            updateEmbed();
        });

        issueSelect.addEventListener('change', updateEmbed);
        styleSelect.addEventListener('change', updateEmbed);

        function updateEmbed() {
            const category = categorySelect.value;
            const issue = issueSelect.value;
            const style = styleSelect.value;

            if (category && issue) {
                // N√§ytet√§√§n sivu1.html Kunnanhallituksen helmikuun 2026 kokoukselle
                if (category === 'kunnanhallitus' && issue === '2026-02') {
                    iframe.src = 'sivu1.html';
                } else {
                    // Muille vaihtoehdoille voisi olla omia sivuja, nyt n√§ytet√§√§n tyhj√§ tai placeholder
                    iframe.src = 'about:blank';
                    placeholder.innerHTML = '<p>Analyysia valitulle yhdistelm√§lle ei viel√§ l√∂ytynyt.<br><small>Kokeile: Kunnanhallitus / Kokous helmikuu 2026</small></p>';
                    placeholder.style.display = 'block';
                    iframe.style.display = 'none';
                    return;
                }

                placeholder.style.display = 'none';
                iframe.style.display = 'block';
                iframe.classList.remove('fade-in');
                void iframe.offsetWidth; // Trigger reflow
                iframe.classList.add('fade-in');
            } else {
                placeholder.style.display = 'block';
                iframe.style.display = 'none';
            }
        }

        // Sidebar Navigation Logic
        document.addEventListener('DOMContentLoaded', () => {
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const closeBtn = document.getElementById('close-sidebar-btn');
            const sidebarMenu = document.getElementById('sidebar-menu');
            const sidebarOverlay = document.getElementById('sidebar-overlay');
            const submenuToggles = document.querySelectorAll('.submenu-toggle');

            function openSidebar() {
                if (sidebarMenu) sidebarMenu.classList.add('active');
                if (sidebarOverlay) sidebarOverlay.classList.add('active');
            }

            function closeSidebar() {
                if (sidebarMenu) sidebarMenu.classList.remove('active');
                if (sidebarOverlay) sidebarOverlay.classList.remove('active');
            }

            if (hamburgerBtn) hamburgerBtn.addEventListener('click', openSidebar);
            if (closeBtn) closeBtn.addEventListener('click', closeSidebar);
            if (sidebarOverlay) sidebarOverlay.addEventListener('click', closeSidebar);

            submenuToggles.forEach(toggle => {
                toggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    const parentLi = toggle.parentElement;
                    const submenu = parentLi.querySelector('.submenu');
                    parentLi.classList.toggle('open');
                    if (submenu) submenu.classList.toggle('open');
                });
            });

            // Tarkistetaan URL-parametrit hakuun (esim. etusivun linkeist√§)
            const params = new URLSearchParams(window.location.search);
            const catParam = params.get('cat');
            const issueParam = params.get('issue');

            if (catParam && issueData[catParam]) {
                categorySelect.value = catParam;
                // P√§ivitet√§√§n asialista manuaalisesti tai liipaisemalla tapahtuma
                categorySelect.dispatchEvent(new Event('change'));

                if (issueParam) {
                    // Pieni viive varmistamaan ett√§ asialista on ehtinyt p√§ivitty√§
                    setTimeout(() => {
                        issueSelect.value = issueParam;
                        updateEmbed();
                    }, 100);
                }
            }
        });
    </script>
</body>

</html>