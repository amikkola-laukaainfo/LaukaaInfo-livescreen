
<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Laukaainfo.fi 2026 - Semantic Intelligence Fingerprint: Generated by Semantix Alusta -->
    <meta name="copyright" content="Laukaainfo.fi">
    <title>Ontologiavisualisointi: Tämä analyysi tarkastelee Laukaan kunnan taloudell...</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { font-family: sans-serif; margin: 0; background: #f8f9fa; color: #1e293b; overflow-x: hidden; position: relative; min-height: 100vh; }
        #container { width: 100vw; height: 100vh; overflow: auto; position: relative; }
        #graph { width: 100%; height: 100%; }
        #info { 
            position: fixed; top: 20px; right: 20px; width: 320px; 
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(8px);
            padding: 24px; border-radius: 20px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.1); display: none;
            max-height: 85vh; overflow-y: auto; z-index: 1000;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        #search-btn {
            position: fixed; top: 20px; right: 150px; z-index: 900;
            background: #ffffff; color: #4f46e5; border: 1px solid #e2e8f0; padding: 10px 20px;
            border-radius: 12px; font-weight: bold; cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: all 0.2s;
        }
        #search-btn:hover { background: #f8fafc; }
        #search-panel {
            position: fixed; top: 70px; right: 150px; width: 320px;
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(8px);
            padding: 24px; border-radius: 20px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.1); display: none;
            max-height: 85vh; overflow-y: auto; z-index: 1000;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        select.fs-select { width: 100%; padding: 8px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #e2e8f0; font-size: 12px; background: #f8fafc; outline: none; }
        .fs-btn { background: #6366f1; color: white; border: none; padding: 8px 16px; border-radius: 8px; font-size: 12px; font-weight: bold; cursor: pointer; width: 100%; margin-bottom: 8px; }
        .fs-btn:disabled { background: #cbd5e1; cursor: not-allowed; }
        .fs-btn-clear { background: #f1f5f9; color: #475569; border: none; padding: 8px 16px; border-radius: 8px; font-size: 12px; font-weight: bold; cursor: pointer; width: 100%; }
        .path-result { margin-top: 16px; padding-top: 16px; border-top: 1px solid #e2e8f0; }
        #summary-btn {
            position: fixed; top: 20px; right: 20px; z-index: 900;
            background: #6366f1; color: white; border: none; padding: 10px 20px;
            border-radius: 12px; font-weight: bold; cursor: pointer;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
            transition: all 0.2s;
        }
        #summary-btn:hover { background: #4f46e5; transform: translateY(-1px); }
        #summary-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.5); backdrop-filter: blur(4px);
            display: none; z-index: 2000; align-items: center; justify-content: center;
            padding: 20px;
        }
        .modal-content {
            background: white; padding: 32px; border-radius: 24px; max-width: 600px;
            width: 100%; max-height: 80vh; overflow-y: auto; position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        }
        @media (max-width: 640px) {
            #info {
                top: auto; right: 0; bottom: 0; left: 0;
                width: auto; border-radius: 24px 24px 0 0;
                max-height: 60vh;
            }
            #summary-btn { top: 10px; right: 10px; padding: 8px 16px; font-size: 13px; }
            #search-btn { top: 10px; right: 120px; padding: 8px 16px; font-size: 13px; }
            #search-panel { 
                top: auto; right: 0; bottom: 0; left: 0; 
                width: auto; border-radius: 24px 24px 0 0; 
                max-height: 60vh; 
            }
        }
        .node { cursor: pointer; stroke: #fff; stroke-width: 2px; }
        .link { stroke: #cbd5e1; stroke-opacity: 0.5; stroke-width: 1.5px; }
        .link-label { font-size: 9px; fill: #64748b; text-anchor: middle; pointer-events: none; }
        .label { font-size: 12px; pointer-events: none; font-weight: 600; fill: #1e293b; }
        h3 { margin-top: 0; color: #1e293b; font-size: 1.25rem; font-weight: 800; }
        .type-tag { 
            display: inline-block; padding: 4px 10px; border-radius: 8px; 
            font-size: 10px; font-weight: 800; background: #f1f5f9; color: #475569;
            margin-bottom: 16px; text-transform: uppercase; letter-spacing: 0.05em;
        }
        .close-btn { position: absolute; top: 16px; right: 16px; cursor: pointer; border: none; background: #f1f5f9; width: 32px; height: 32px; border-radius: 50%; font-size: 18px; display: flex; align-items: center; justify-content: center; }
        
        .timeline-container { max-width: 800px; margin: 60px auto; padding: 20px; position: relative; }
        .timeline-line { position: absolute; left: 40px; top: 0; bottom: 0; width: 2px; background: #e2e8f0; }
        .timeline-item { position: relative; margin-bottom: 48px; padding-left: 80px; }
        .timeline-dot { 
            position: absolute; left: 20px; top: 0; width: 40px; height: 40px; 
            background: white; border: 4px solid #6366f1; border-radius: 50%; 
            cursor: pointer; z-index: 10; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        }
        .timeline-card { 
            background: white; padding: 24px; border-radius: 20px; 
            border: 1px solid #e2e8f0; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
        }
        .timeline-card:hover { transform: translateX(4px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        .timeline-change {
            margin: 12px 0 12px 40px; padding: 6px 16px; background: #f5f3ff;
            color: #4f46e5; border-radius: 20px; font-size: 11px; font-weight: 800;
            display: inline-block; border: 1px solid #ddd6fe;
        }
        footer {
            position: absolute; bottom: 20px; left: 0; width: 100%; text-align: center;
            font-size: 11px; color: #94a3b8; opacity: 0.8;
            display: flex; flex-direction: column; align-items: center; gap: 8px;
            pointer-events: auto;
        }
        .disclaimer {
            font-size: 9px; color: #cbd5e1; max-width: 400px; line-height: 1.4;
            margin-top: 4px;
        }
        .branding-link {
            color: #6366f1; text-decoration: none; font-weight: 800;
            transition: color 0.2s;
        }
        .branding-link:hover { color: #4f46e5; }
    </style>
</head>
<body>
    <div id="container">
        <button id="summary-btn" onclick="document.getElementById('summary-modal').style.display='flex'">Yhteenveto</button>
        <button id="search-btn" onclick="toggleSearchPanel()">Yhteyshaku</button>
        
        <div id="search-panel">
            <button class="close-btn" onclick="document.getElementById('search-panel').style.display='none'">&times;</button>
            <h3 style="color: #1e293b; margin-bottom: 16px; font-size: 16px;">Etsi yhteys</h3>
            
            <label style="font-size: 10px; font-weight: 800; color: #64748b; text-transform: uppercase;">Mistä (Solmu A)</label>
            <select id="search-a" class="fs-select" onchange="updateSearchUI()"><option value="">-- Valitse solmu --</option></select>
            
            <label style="font-size: 10px; font-weight: 800; color: #64748b; text-transform: uppercase;">Mihin (Solmu B)</label>
            <select id="search-b" class="fs-select" onchange="updateSearchUI()"><option value="">-- Valitse solmu --</option></select>
            
            <div style="display: flex; gap: 8px;">
                <button id="do-search-btn" class="fs-btn" onclick="executeSearch()" disabled>Hae reitti</button>
                <button class="fs-btn-clear" onclick="clearSearch()">Tyhjennä</button>
            </div>
            
            <div id="search-results" class="path-result" style="display: none;"></div>
        </div>
        
        <div id="summary-modal" onclick="if(event.target === this) this.style.display='none'">
            <div class="modal-content">
                <button class="close-btn" onclick="document.getElementById('summary-modal').style.display='none'">&times;</button>
                <h3 style="color: #6366f1; margin-bottom: 16px;">Analyysin yhteenveto</h3>
                <p id="sum-p" style="font-size: 16px; color: #334155; line-height: 1.8; font-style: italic;"></p>
            </div>
        </div>

        
            <div class="timeline-container">
                <div class="timeline-line"></div>
                <div id="timeline-content"></div>
            </div>
        
    </div>
    
    <div id="info">
        <button class="close-btn" onclick="document.getElementById('info').style.display='none'">&times;</button>
        <h3 id="info-title"></h3>
        <div id="info-type" class="type-tag"></div>
        <p id="info-desc" style="font-size: 14px; color: #475569; line-height: 1.6; margin-bottom: 20px;"></p>
        <div id="info-sources-title" style="font-size: 11px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin-bottom: 8px; display: none;">Lähteet</div>
        <div id="info-source" style="display: flex; flex-direction: column; gap: 8px;"></div>
    </div>

    <footer>
        <div style="font-weight: 800;">Laukaainfo.fi 2026</div>
        <div class="disclaimer">
            Analyysi perustuu tekoälyyn, joten varmista aina tiedot alkuperäisistä lähteistä. 
            Tämä sivu on generoitu Semantix-alustalla.
        </div>
        <div style="font-size: 8px; color: #e2e8f0; margin-top: 10px;" data-copyright="Laukaainfo.fi" data-fingerprint="0e3tpvxnhsqg">© Laukaainfo.fi - Semantic Intelligence Fingerprint Embedded</div>
    </footer>

    <script>
        (function() {
            const _LFI_MARK = "Laukaainfo.fi - Tekijänoikeus suojattu";
            const _enc = {
                d: ["eyJzdW1tYXJ5IjoiVMOkbcOkIGFuYWx5eXNpIHRhcmthc3RlbG","VlIExhdWthYW4ga3VubmFuIHRhbG91ZGVsbGlzdGEga2VoaXR5","c3TDpCBqYSByYWtlbnRlZWxsaXNpYSBtdXV0b2tzaWEgdnVvc2","llbiAyMDE44oCTMjAyNCB0aWxpbnDDpMOkdMO2c2FpbmVpc3Rv","amVuIHBvaGphbHRhLiBBbmFseXlzaSBvbiBqw6RzZW5uZWx0eS","BzZW1hbnR0aXNla3NpIG9udG9sb2dpYWtzaSwgam9rYSBwYWlu","b3R0YWEgcmFoYXZpcnRvamEsIHJlc3Vyc3NlamEgamEgdGFsb3","VkZW4ga2VzdMOkdnl5ZGVuIGFpa2FqYW5hYS4iLCJub2RlcyI6","W3siaWQiOiJ2dW9zaWthdGVfMjAxOCIsInR5cGUiOiJtaXR0YX","JpIiwibGFiZWwiOiJWdW9zaWthdGUgMjAxOCIsInNvdXJjZSI6","IlRpbGlucGFhdG9zLTIwMTgucGRmIiwiZGVzY3JpcHRpb24iOi","JWdW9zaWthdGUgb2xpIGhlaWtrbywgMSw4IE3igqwuIiwiZGF0","ZSI6IjIwMTgiLCJvcmRlciI6MX0seyJpZCI6InZ1b3Npa2F0ZV","8yMDIwIiwidHlwZSI6Im1pdHRhcmkiLCJsYWJlbCI6IlZ1b3Np","a2F0ZSAyMDIwIiwic291cmNlIjoiVGlsaW5wYWF0b3MtMjAyMC","5wZGYiLCJkZXNjcmlwdGlvbiI6IlZ1b3Npa2F0ZSBub3VzaSBl","bm7DpHR5a3NlbGxpc2VlbiAxMiw4IE3igqw6b29uIHZhbHRpb2","4ga29yb25hdHVraWVuIGFuc2lvc3RhLiIsImRhdGUiOiIyMDIw","Iiwib3JkZXIiOjJ9LHsiaWQiOiJ2dW9zaWthdGVfMjAyMiIsIn","R5cGUiOiJtaXR0YXJpIiwibGFiZWwiOiJWdW9zaWthdGUgMjAy","MiIsInNvdXJjZSI6InRwLTIwMjIta2lyamEta3ZfdmVyc2lvLn","BkZiIsImRlc2NyaXB0aW9uIjoiVnVvc2lrYXRlIGxhc2tpIGrD","pGxsZWVuIDIsMiBN4oKsOm9vbi4iLCJkYXRlIjoiMjAyMiIsIm","9yZGVyIjozfSx7ImlkIjoidnVvc2lrYXRlXzIwMjMiLCJ0eXBl","IjoibWl0dGFyaSIsImxhYmVsIjoiVnVvc2lrYXRlIDIwMjMiLC","Jzb3VyY2UiOiJ0cC0yMDIzLnBkZiIsImRlc2NyaXB0aW9uIjoi","VnVvc2lrYXRlIGVscHlpIHJha2VudGVlbGxpc2VuIG11dXRva3","NlbiBtecO2dMOkIDEwLDIgTeKCrDpvb24uIiwiZGF0ZSI6IjIw","MjMiLCJvcmRlciI6NH0seyJpZCI6InZ1b3Npa2F0ZV8yMDI0Ii","widHlwZSI6Im1pdHRhcmkiLCJsYWJlbCI6IlZ1b3Npa2F0ZSAy","MDI0Iiwic291cmNlIjoidHAtMjAyNC5wZGYiLCJkZXNjcmlwdG","lvbiI6IlZ1b3Npa2F0ZSBvbGkgNCw5IE3igqwuIiwiZGF0ZSI6","IjIwMjQiLCJvcmRlciI6NX0seyJpZCI6InRpbGlrYXVkZW5fdH","Vsb3NfMjAxOCIsInR5cGUiOiJtaXR0YXJpIiwibGFiZWwiOiJU","aWxpa2F1ZGVuIHR1bG9zIDIwMTgiLCJzb3VyY2UiOiJUaWxpbn","BhYXRvcy0yMDE4LnBkZiIsImRlc2NyaXB0aW9uIjoiVGlsaWth","dWRlbiB0dWxvcyBvbGkgYWxpasOkw6Rtw6RpbmVuLCAtNCwwIE","3igqwuIiwiZGF0ZSI6IjIwMTgiLCJvcmRlciI6Nn0seyJpZCI6","InRpbGlrYXVkZW5fdHVsb3NfMjAxOSIsInR5cGUiOiJtaXR0YX","JpIiwibGFiZWwiOiJUaWxpa2F1ZGVuIHR1bG9zIDIwMTkiLCJz","b3VyY2UiOiJUaWxpbnBhYXRvcy0yMDE5LnBkZiIsImRlc2NyaX","B0aW9uIjoiVGlsaWthdWRlbiB0dWxvcyBvbGkgYWxpasOkw6Rt","w6RpbmVuLCAtMyw5IE3igqwuIiwiZGF0ZSI6IjIwMTkiLCJvcm","RlciI6N30seyJpZCI6InRpbGlrYXVkZW5fdHVsb3NfMjAyMCIs","InR5cGUiOiJtaXR0YXJpIiwibGFiZWwiOiJUaWxpa2F1ZGVuIH","R1bG9zIDIwMjAiLCJzb3VyY2UiOiJ0cC0yMDIzLnBkZiIsImRl","c2NyaXB0aW9uIjoiVGlsaWthdWRlbiB0dWxvcyBvbGkgeWxpas","Okw6Rtw6RpbmVuLCArNCwxIE3igqwuIiwiZGF0ZSI6IjIwMjAi","LCJvcmRlciI6OH0seyJpZCI6InRpbGlrYXVkZW5fdHVsb3NfMj","AyMiIsInR5cGUiOiJtaXR0YXJpIiwibGFiZWwiOiJUaWxpa2F1","ZGVuIHR1bG9zIDIwMjIiLCJzb3VyY2UiOiJ0cC0yMDIyLWtpcm","phLWt2X3ZlcnNpby5wZGYiLCJkZXNjcmlwdGlvbiI6IlRpbGlr","YXVkZW4gdHVsb3Mgb2xpIGFsaWrDpMOkbcOkaW5lbiwgLTQsNi","BN4oKsLiIsImRhdGUiOiIyMDIyIiwib3JkZXIiOjl9LHsiaWQi","OiJ0aWxpa2F1ZGVuX3R1bG9zXzIwMjMiLCJ0eXBlIjoibWl0dG","FyaSIsImxhYmVsIjoiVGlsaWthdWRlbiB0dWxvcyAyMDIzIiwi","c291cmNlIjoidHAtMjAyMy5wZGYiLCJkZXNjcmlwdGlvbiI6Il","RpbGlrYXVkZW4gdHVsb3Mgb2xpIHlsaWrDpMOkbcOkaW5lbiwg","KzIsOCBN4oKsLiIsImRhdGUiOiIyMDIzIiwib3JkZXIiOjEwfS","x7ImlkIjoidGlsaWthdWRlbl90dWxvc18yMDI0IiwidHlwZSI6","Im1pdHRhcmkiLCJsYWJlbCI6IlRpbGlrYXVkZW4gdHVsb3MgMj","AyNCIsInNvdXJjZSI6InRwLTIwMjQucGRmIiwiZGVzY3JpcHRp","b24iOiJUaWxpa2F1ZGVuIHR1bG9zIG9saSBhbGlqw6TDpG3DpG","luZW4sIC0yLDcgTeKCrC4iLCJkYXRlIjoiMjAyNCIsIm9yZGVy","IjoxMX0seyJpZCI6InZhbHRpb25vc3V1ZGV0XzIwMTgiLCJ0eX","BlIjoibWl0dGFyaSIsImxhYmVsIjoiVmFsdGlvbm9zdXVkZXQg","MjAxOCIsInNvdXJjZSI6IlRpbGlucGFhdG9zLTIwMTgucGRmIi","wiZGVzY3JpcHRpb24iOiJWYWx0aW9ub3N1dWRldCBvbGl2YXQg","a2Vza2VpbmVuIHR1bG9ubMOkaGRlLCAzNiw2IE3igqwuIiwiZG","F0ZSI6IjIwMTgiLCJvcmRlciI6MTJ9LHsiaWQiOiJ2YWx0aW9u","b3N1dWRldF8yMDIwIiwidHlwZSI6Im1pdHRhcmkiLCJsYWJlbC","I6IlZhbHRpb25vc3V1ZGV0IDIwMjAiLCJzb3VyY2UiOiJ0cC0y","MDIzLnBkZiIsImRlc2NyaXB0aW9uIjoiVmFsdGlvbm9zdXVkZX","Qgb2xpdmF0IDQ2LDUgTeKCrC4iLCJkYXRlIjoiMjAyMCIsIm9y","ZGVyIjoxM30seyJpZCI6InZhbHRpb25vc3V1ZGV0XzIwMjIiLC","J0eXBlIjoibWl0dGFyaSIsImxhYmVsIjoiVmFsdGlvbm9zdXVk","ZXQgMjAyMiIsInNvdXJjZSI6InRwLTIwMjMucGRmIiwiZGVzY3","JpcHRpb24iOiJWYWx0aW9ub3N1dWRldCBvbGl2YXQgNDYsNiBN","4oKsLiIsImRhdGUiOiIyMDIyIiwib3JkZXIiOjE0fSx7ImlkIj","oidmFsdGlvbm9zdXVkZXRfMjAyMyIsInR5cGUiOiJtaXR0YXJp","IiwibGFiZWwiOiJWYWx0aW9ub3N1dWRldCAyMDIzIiwic291cm","NlIjoidHAtMjAyMy5wZGYiLCJkZXNjcmlwdGlvbiI6IlNvdGUt","dXVkaXN0dXMgcHVvbGl0dGkgdmFsdGlvbm9zdXVkZXQgMjAsMy","BN4oKsOm9vbi4iLCJkYXRlIjoiMjAyMyIsIm9yZGVyIjoxNX0s","eyJpZCI6InZhbHRpb25vc3V1ZGV0XzIwMjQiLCJ0eXBlIjoibW","l0dGFyaSIsImxhYmVsIjoiVmFsdGlvbm9zdXVkZXQgMjAyNCIs","InNvdXJjZSI6InRwLTIwMjQucGRmIiwiZGVzY3JpcHRpb24iOi","JWYWx0aW9ub3N1dWtzaWVuIGxhc2t1IGphdGt1aSAxNSw2IE3i","gqw6b29uLiIsImRhdGUiOiIyMDI0Iiwib3JkZXIiOjE2fSx7Im","lkIjoidmVyb3R1bG90XzIwMTgiLCJ0eXBlIjoibWl0dGFyaSIs","ImxhYmVsIjoiVmVyb3R1bG90IDIwMTgiLCJzb3VyY2UiOiJUaW","xpbnBhYXRvcy0yMDE4LnBkZiIsImRlc2NyaXB0aW9uIjoiVmVy","b3R1bG90IGthc3ZvaXZhdCB0YXNhaXNlc3RpLCA2NiwxIE3igq","wuIiwiZGF0ZSI6IjIwMTgiLCJvcmRlciI6MTd9LHsiaWQiOiJ2","ZXJvdHVsb3RfMjAyMiIsInR5cGUiOiJtaXR0YXJpIiwibGFiZW","wiOiJWZXJvdHVsb3QgMjAyMiIsInNvdXJjZSI6InRwLTIwMjMu","cGRmIiwiZGVzY3JpcHRpb24iOiJWZXJvdHVsb3Qga2Fzdm9pdm","F0IHRhc2Fpc2VzdGkgNzgsNiBN4oKsOm9vbi4iLCJkYXRlIjoi","MjAyMiIsIm9yZGVyIjoxOH0seyJpZCI6InZlcm90dWxvdF8yMD","IzIiwidHlwZSI6Im1pdHRhcmkiLCJsYWJlbCI6IlZlcm90dWxv","dCAyMDIzIiwic291cmNlIjoidHAtMjAyMy5wZGYiLCJkZXNjcm","lwdGlvbiI6IlNvdGUtdXVkaXN0dWtzZW4gbXnDtnTDpCB2ZXJv","dHVsb3QgbGVpa2thdXR1aXZhdCA0NCwzIE3igqw6b29uLiIsIm","RhdGUiOiIyMDIzIiwib3JkZXIiOjE5fSx7ImlkIjoidmVyb3R1","bG90XzIwMjQiLCJ0eXBlIjoibWl0dGFyaSIsImxhYmVsIjoiVm","Vyb3R1bG90IDIwMjQiLCJzb3VyY2UiOiJ0cC0yMDI0LnBkZiIs","ImRlc2NyaXB0aW9uIjoiVmVyb3R1bG90IG9saXZhdCA0Niw4IE","3igqwuIiwiZGF0ZSI6IjIwMjQiLCJvcmRlciI6MjB9LHsiaWQi","OiJsYWluYXRfcGVyX2FzdWthc18yMDE4IiwidHlwZSI6Im1pdH","RhcmkiLCJsYWJlbCI6IkxhaW5hdCDigqwvYXN1a2FzIDIwMTgi","LCJzb3VyY2UiOiJUaWxpbnBhYXRvcy0yMDE4LnBkZiIsImRlc2","NyaXB0aW9uIjoiTGFpbmFtw6TDpHLDpCBhc3VrYXN0YSBrb2hk","ZW4gb2xpIDQgNjU0IOKCrC4iLCJkYXRlIjoiMjAxOCIsIm9yZG","VyIjoyMX0seyJpZCI6ImxhaW5hdF9wZXJfYXN1a2FzXzIwMjMi","LCJ0eXBlIjoibWl0dGFyaSIsImxhYmVsIjoiTGFpbmF0IOKCrC","9hc3VrYXMgMjAyMyIsInNvdXJjZSI6InRwLTIwMjMucGRmIiwi","ZGVzY3JpcHRpb24iOiJMYWluYW3DpMOkcsOkIGFzdWthc3RhIG","tvaGRlbiBub3VzaSBodWlwcHV1bnNhLCA1IDg5MSDigqwuIiwi","ZGF0ZSI6IjIwMjMiLCJvcmRlciI6MjJ9LHsiaWQiOiJsYWluYX","RfcGVyX2FzdWthc18yMDI0IiwidHlwZSI6Im1pdHRhcmkiLCJs","YWJlbCI6IkxhaW5hdCDigqwvYXN1a2FzIDIwMjQiLCJzb3VyY2","UiOiJ0cC0yMDI0LnBkZiIsImRlc2NyaXB0aW9uIjoiTGFpbmFr","YW50YSBsYXNraSBoaWVtYW4gNSA3ODIgZXVyb29uIGFzdWthc3","RhIGtvaGRlbi4iLCJkYXRlIjoiMjAyNCIsIm9yZGVyIjoyM30s","eyJpZCI6InZ1b3Npa2F0ZV9wb2lzdG9pc3RhXzIwMTgiLCJ0eX","BlIjoibWl0dGFyaSIsImxhYmVsIjoiVnVvc2lrYXRlIC8gcG9p","c3RvdCAyMDE4Iiwic291cmNlIjoiVGlsaW5wYWF0b3MtMjAxOC","5wZGYiLCJkZXNjcmlwdGlvbiI6IlR1bG9yYWhvaXR1cyBlaSBy","aWl0dMOkbnl0IHBvaXN0b2plbiBrYXR0YW1pc2VlbiAoMzEgJS","kuIiwiZGF0ZSI6IjIwMTgiLCJvcmRlciI6MjR9LHsiaWQiOiJ2","dW9zaWthdGVfcG9pc3RvaXN0YV8yMDIwIiwidHlwZSI6Im1pdH","RhcmkiLCJsYWJlbCI6IlZ1b3Npa2F0ZSAvIHBvaXN0b3QgMjAy","MCIsInNvdXJjZSI6IlRpbGlucGFhdG9zLTIwMjAucGRmIiwiZG","VzY3JpcHRpb24iOiJUdWxvcmFob2l0dXMgcmlpdHRpIHBvaXN0","b2plbiBrYXR0YW1pc2VlbiAoMTQ3ICUpLiIsImRhdGUiOiIyMD","IwIiwib3JkZXIiOjI1fSx7ImlkIjoidnVvc2lrYXRlX3BvaXN0","b2lzdGFfMjAyMiIsInR5cGUiOiJtaXR0YXJpIiwibGFiZWwiOi","JWdW9zaWthdGUgLyBwb2lzdG90IDIwMjIiLCJzb3VyY2UiOiJ0","cC0yMDIyLWtpcmphLWt2X3ZlcnNpby5wZGYiLCJkZXNjcmlwdG","lvbiI6IlR1bG9yYWhvaXR1cyBlaSByaWl0dMOkbnl0IHBvaXN0","b2plbiBrYXR0YW1pc2VlbiAoMzIgJSkuIiwiZGF0ZSI6IjIwMj","IiLCJvcmRlciI6MjZ9LHsiaWQiOiJ2dW9zaWthdGVfcG9pc3Rv","aXN0YV8yMDIzIiwidHlwZSI6Im1pdHRhcmkiLCJsYWJlbCI6Il","Z1b3Npa2F0ZSAvIHBvaXN0b3QgMjAyMyIsInNvdXJjZSI6InRw","LTIwMjMucGRmIiwiZGVzY3JpcHRpb24iOiJUdWxvcmFob2l0dX","MgcmlpdHRpIHBvaXN0b2plbiBrYXR0YW1pc2VlbiAoMTM5ICUp","LiIsImRhdGUiOiIyMDIzIiwib3JkZXIiOjI3fSx7ImlkIjoidG","9pbWludGFrYXRlXzIwMjIiLCJ0eXBlIjoibWl0dGFyaSIsImxh","YmVsIjoiVG9pbWludGFrYXRlIDIwMjIiLCJzb3VyY2UiOiJ0cC","0yMDIyLWtpcmphLWt2X3ZlcnNpby5wZGYiLCJkZXNjcmlwdGlv","biI6Ik5ldHRvbWVub3Qga2Fzdm9pdmF0LCB0b2ltaW50YWthdG","UgLTEyNCw1IE3igqwuIiwiZGF0ZSI6IjIwMjIiLCJvcmRlciI6","Mjh9LHsiaWQiOiJ0b2ltaW50YWthdGVfMjAyNCIsInR5cGUiOi","JtaXR0YXJpIiwibGFiZWwiOiJUb2ltaW50YWthdGUgMjAyNCIs","InNvdXJjZSI6InRwLTIwMjQucGRmIiwiZGVzY3JpcHRpb24iOi","JTb3RlLXV1ZGlzdHVzIHBpZW5lbnNpIGt1bHVyYWtlbm5ldHRh","LCB0b2ltaW50YWthdGUgLTUzLDYgTeKCrC4iLCJkYXRlIjoiMj","AyNCIsIm9yZGVyIjoyOX0seyJpZCI6Im9tYXZhcmFpc3V1c2Fz","dGVfMjAxOCIsInR5cGUiOiJtaXR0YXJpIiwibGFiZWwiOiJPbW","F2YXJhaXN1dXNhc3RlIDIwMTgiLCJzb3VyY2UiOiJUaWxpbnBh","YXRvcy0yMDE4LnBkZiIsImRlc2NyaXB0aW9uIjoiS3VubmFuIH","Zha2F2YXJhaXN1dXMsIG9tYXZhcmFpc3V1c2FzdGUgMjUsMyAl","LiIsImRhdGUiOiIyMDE4Iiwib3JkZXIiOjMwfSx7ImlkIjoib2","1hdmFyYWlzdXVzYXN0ZV8yMDIyIiwidHlwZSI6Im1pdHRhcmki","LCJsYWJlbCI6Ik9tYXZhcmFpc3V1c2FzdGUgMjAyMiIsInNvdX","JjZSI6InRwLTIwMjIta2lyamEta3ZfdmVyc2lvLnBkZiIsImRl","c2NyaXB0aW9uIjoiT21hdmFyYWlzdXVzYXN0ZSBsYXNraSBhbG","ltbWlsbGFhbiAxOCwwICU6aWluLiIsImRhdGUiOiIyMDIyIiwi","b3JkZXIiOjMxfSx7ImlkIjoib21hdmFyYWlzdXVzYXN0ZV8yMD","I0IiwidHlwZSI6Im1pdHRhcmkiLCJsYWJlbCI6Ik9tYXZhcmFp","c3V1c2FzdGUgMjAyNCIsInNvdXJjZSI6InRwLTIwMjQucGRmIi","wiZGVzY3JpcHRpb24iOiJPbWF2YXJhaXN1dXNhc3RlIG9saSAx","OCw3ICUuIiwiZGF0ZSI6IjIwMjQiLCJvcmRlciI6MzJ9LHsiaW","QiOiJ2YWVzdG9fMjAxOCIsInR5cGUiOiJtaXR0YXJpIiwibGFi","ZWwiOiJWw6RraWx1a3UgMjAxOCIsInNvdXJjZSI6IlRpbGlucG","FhdG9zLTIwMTgucGRmIiwiZGVzY3JpcHRpb24iOiJBc3Vra2Fp","dGEgb2xpIDE4IDkyOS4iLCJkYXRlIjoiMjAxOCIsIm9yZGVyIj","ozM30seyJpZCI6InZhZXN0b18yMDIzIiwidHlwZSI6Im1pdHRh","cmkiLCJsYWJlbCI6IlbDpGtpbHVrdSAyMDIzIiwic291cmNlIj","oidHAtMjAyMy5wZGYiLCJkZXNjcmlwdGlvbiI6IkFzdWthc23D","pMOkcsOkIGxhc2tpIDE4IDc1MCBhc3Vra2Fhc2Vlbi4iLCJkYX","RlIjoiMjAyMyIsIm9yZGVyIjozNH0seyJpZCI6InZhZXN0b18y","MDI0IiwidHlwZSI6Im1pdHRhcmkiLCJsYWJlbCI6IlbDpGtpbH","VrdSAyMDI0Iiwic291cmNlIjoidHAtMjAyNC5wZGYiLCJkZXNj","cmlwdGlvbiI6IllsbMOkdHTDpHbDpCBrw6TDpG5uZSBrYXN2dX","VuLCAxOCA4NzMgYXN1a2FzdGEuIiwiZGF0ZSI6IjIwMjQiLCJv","cmRlciI6MzV9LHsiaWQiOiJodW9sdG9zdWhkZV8yMDIxIiwidH","lwZSI6Im1pdHRhcmkiLCJsYWJlbCI6Ikh1b2x0b3N1aGRlIDIw","MjEiLCJzb3VyY2UiOiJUUC0yMDIxLWtpcmphX0tWMDYwNjIwMj","IucGRmIiwiZGVzY3JpcHRpb24iOiJWw6Rlc3TDtmxsaW5lbiBo","dW9sdG9zdWhkZSBvbiBrb3JrZWEgKDc0LDYpIHN1dXJlbiBsYX","N0ZW4gbcOkw6Ryw6RuIHZ1b2tzaS4iLCJkYXRlIjoiMjAyMSIs","Im9yZGVyIjozNn0seyJpZCI6Imh1b2x0b3N1aGRlXzIwMjQiLC","J0eXBlIjoibWl0dGFyaSIsImxhYmVsIjoiSHVvbHRvc3VoZGUg","MjAyNCIsInNvdXJjZSI6InRwLTIwMjQucGRmIiwiZGVzY3JpcH","Rpb24iOiJIdW9sdG9zdWhkZSBoZWlra2VuaSBlZGVsbGVlbiwg","b2xsZW4gODAuIiwiZGF0ZSI6IjIwMjQiLCJvcmRlciI6Mzd9LH","siaWQiOiJpbnZlc3RvaW5uaXRfMjAyMSIsInR5cGUiOiJtaXR0","YXJpIiwibGFiZWwiOiJOZXR0b2ludmVzdG9pbm5pdCAyMDIxIi","wic291cmNlIjoidHAtMjAyMy5wZGYiLCJkZXNjcmlwdGlvbiI6","IkludmVzdG9pbm5pdCBvbGl2YXQgaHVpcHVzc2FhbiwgMTcsMS","BN4oKsIChlcml0eWlzZXN0aSBrb3VsdXQpLiIsImRhdGUiOiIy","MDIxIiwib3JkZXIiOjM4fSx7ImlkIjoiaW52ZXN0b2lubml0Xz","IwMjQiLCJ0eXBlIjoibWl0dGFyaSIsImxhYmVsIjoiSW52ZXN0","b2lubml0IDIwMjQiLCJzb3VyY2UiOiJ0cC0yMDI0LnBkZiIsIm","Rlc2NyaXB0aW9uIjoiSW52ZXN0b2ludGl0YXNvIG1hbHRpbGxp","c3R1aSA0LDUgTeKCrDpvb24uIiwiZGF0ZSI6IjIwMjQiLCJvcm","RlciI6Mzl9LHsiaWQiOiJrdW50YWtvbnNlcm5pIiwidHlwZSI6","Inlrc2lsw7YiLCJsYWJlbCI6IkxhdWthYW4ga3VudGFrb25zZX","JuaSIsInNvdXJjZSI6InRwLTIwMjIta2lyamEta3ZfdmVyc2lv","LnBkZiwgdHAtMjAyNC5wZGYiLCJkZXNjcmlwdGlvbiI6IlNpc8","OkbHTDpMOkIGt1bm5hbiBqYSB0eXTDpHJ5aHRpw7Z0IChlc2lt","LiBMYXVrYWFuIFZlc2lodW9sdG8gT3ksIExhdWthYW4gVnVva3","Jha29kaXQgT3kpLiIsImRhdGUiOiIiLCJvcmRlciI6NDB9LHsi","aWQiOiJoeXZpbnZvaW50aWFsdWUiLCJ0eXBlIjoieWtzaWzDti","IsImxhYmVsIjoiSHl2aW52b2ludGlhbHVlIChIVkEpIiwic291","cmNlIjoidHAtMjAyMi1raXJqYS1rdl92ZXJzaW8ucGRmLCB0cC","0yMDI0LnBkZiIsImRlc2NyaXB0aW9uIjoiVWxrb2luZW4gdG9p","bWlqYSwgam9sbGUgc290ZS1wYWx2ZWx1dCBzaWlydHlpdsOkdC","AyMDIzLiIsImRhdGUiOiIyMDIzIiwib3JkZXIiOjQxfSx7Imlk","IjoicmFob2l0dXNsw6RoZGVfdmVyb3R1bG90IiwidHlwZSI6Im","x1b2trYSIsImxhYmVsIjoiUmFob2l0dXNsw6RoZGU6IFZlcm90","dWxvdCIsInNvdXJjZSI6IlRpbGlucGFhdG9zLTIwMTgucGRmLC","B0cC0yMDIzLnBkZiwgdHAtMjAyNC5wZGYiLCJkZXNjcmlwdGlv","biI6Ikt1bm5hbiB0w6Rya2VpbiB0dWxvbmzDpGhkZSwgc2lzw6","RsdMOkw6Qga3VubmFsbGlzLSwga2lpbnRlaXN0w7YtIGphIHlo","dGVpc8O2dmVyb24uIiwiZGF0ZSI6IiIsIm9yZGVyIjo0Mn0sey","JpZCI6InJhaG9pdHVzbMOkaGRlX3ZhbHRpb25vc3V1ZGV0Iiwi","dHlwZSI6Imx1b2trYSIsImxhYmVsIjoiUmFob2l0dXNsw6RoZG","U6IFZhbHRpb25vc3V1ZGV0Iiwic291cmNlIjoiVGlsaW5wYWF0","b3MtMjAxOC5wZGYsIHRwLTIwMjMucGRmLCB0cC0yMDI0LnBkZi","IsImRlc2NyaXB0aW9uIjoiS2Vza2VpbmVuIHR1bG9ubMOkaGRl","LCBqb25rYSBtw6TDpHLDpCBwdW9saXR0dWkgc290ZS11dWRpc3","R1a3Nlc3NhLiIsImRhdGUiOiIiLCJvcmRlciI6NDN9LHsiaWQi","OiJ2ZWx2b2l0ZV9sYWluYWthbnRhIiwidHlwZSI6Imx1b2trYS","IsImxhYmVsIjoiVmVsdm9pdGU6IExhaW5ha2FudGEiLCJzb3Vy","Y2UiOiJUaWxpbnBhYXRvcy0yMDE4LnBkZiwgdHAtMjAyMy5wZG","YsIHRwLTIwMjQucGRmIiwiZGVzY3JpcHRpb24iOiJLdW5uYW4g","dmVsa2FhbnR1bmVpc3V1ZGVuIG1pdHRhcmksIGthc3ZvaSB2dW","90ZWVuIDIwMjMgYXN0aS4iLCJkYXRlIjoiIiwib3JkZXIiOjQ0","fSx7ImlkIjoic3VoZGVfcmFob2l0dGFhIiwidHlwZSI6InN1aG","RlIiwibGFiZWwiOiJSYWhvaXR0YWEiLCJzb3VyY2UiOiJUaWxp","bnBhYXRvcy0yMDE4LnBkZiwgVGlsaW5wYWF0b3MtMjAxOS5wZG","YiLCJkZXNjcmlwdGlvbiI6IlZlcm9yYWhvaXR1cyAoVmVyb3Qg","KyBWYWx0aW9ub3N1dWRldCkgcmFob2l0dGFhIGt1bm5hbiB0b2","ltaW50YWthdHRlZW4uIiwiZGF0ZSI6IiIsIm9yZGVyIjo0NX0s","eyJpZCI6InN1aGRlX2thdHRhYSIsInR5cGUiOiJzdWhkZSIsIm","xhYmVsIjoiS2F0dGFhIiwic291cmNlIjoiVGlsaW5wYWF0b3Mt","MjAxOC5wZGYsIFRpbGlucGFhdG9zLTIwMjAucGRmIiwiZGVzY3","JpcHRpb24iOiJWdW9zaWthdHRlZW4gdHVsaXNpIGthdHRhYSBw","b2lzdG90IGphIGFydm9uYWxlbnR1bWlzZXQuIiwiZGF0ZSI6Ii","IsIm9yZGVyIjo0Nn0seyJpZCI6InN1aGRlX3ZlbGthYW5udXR0","YWEiLCJ0eXBlIjoic3VoZGUiLCJsYWJlbCI6IlZlbGthYW5udX","R0YWEiLCJzb3VyY2UiOiJ0cC0yMDIyLWtpcmphLWt2X3ZlcnNp","by5wZGYsIFRQLTIwMjEta2lyamFfS1YwNjA2MjAyMi5wZGYiLC","JkZXNjcmlwdGlvbiI6IkpvcyBpbnZlc3RvaW5uaXQgeWxpdHTD","pHbDpHQgdnVvc2lrYXR0ZWVuLCBrdW50YSBvdHRhYSBsaXPDpM","OkIGxhaW5hYS4iLCJkYXRlIjoiIiwib3JkZXIiOjQ3fSx7Imlk","Ijoic3VoZGVfdmFpa3V0dGFhIiwidHlwZSI6InN1aGRlIiwibG","FiZWwiOiJWYWlrdXR0YWEiLCJzb3VyY2UiOiJUUC0yMDIxLWtp","cmphX0tWMDYwNjIwMjIucGRmLCBUaWxpbnBhYXRvcy0yMDIwLn","BkZiIsImRlc2NyaXB0aW9uIjoiU3ludHl2eXlkZW4gbGFza3Ug","amEgdsOkZXN0w7ZuIGlrw6TDpG50eW1pbmVuIHZhaWt1dHRhdm","F0IGh1b2x0b3N1aHRlZXNlZW4gamEgcGl0a8OkbiBhaWthdsOk","bGluIGtlc3TDpHZ5eXRlZW4uIiwiZGF0ZSI6IiIsIm9yZGVyIj","o0OH0seyJpZCI6InN1aGRlX211dXR0YWEiLCJ0eXBlIjoic3Vo","ZGUiLCJsYWJlbCI6Ik11dXR0YWEiLCJzb3VyY2UiOiJ0cC0yMD","IzLnBkZiwgdHAtMjAyNC5wZGYiLCJkZXNjcmlwdGlvbiI6Ikh5","dmludm9pbnRpYWx1ZXV1ZGlzdHVzIG11dXR0aSAocHVvbGl0dG","kpIGt1bm5hbiB0dWxvamVuIGphIG1lbm9qZW4gdm9seXltaW4g","dnVvbm5hIDIwMjMuIiwiZGF0ZSI6IjIwMjMiLCJvcmRlciI6ND","l9XSwiZWRnZXMiOlt7InNvdXJjZSI6InZlcm90dWxvdF8yMDE4","IiwidGFyZ2V0Ijoic3VoZGVfcmFob2l0dGFhIiwibGFiZWwiOi","JyYWhvaXR0YWEiLCJzb3VyY2VVcmwiOiJUaWxpbnBhYXRvcy0y","MDE4LnBkZiJ9LHsic291cmNlIjoic3VoZGVfcmFob2l0dGFhIi","widGFyZ2V0IjoidG9pbWludGFrYXRlXzIwMjIiLCJsYWJlbCI6","InJhaG9pdHRhYSIsInNvdXJjZVVybCI6IlRpbGlucGFhdG9zLT","IwMTgucGRmIn0seyJzb3VyY2UiOiJ2YWx0aW9ub3N1dWRldF8y","MDE4IiwidGFyZ2V0Ijoic3VoZGVfcmFob2l0dGFhIiwibGFiZW","wiOiJyYWhvaXR0YWEiLCJzb3VyY2VVcmwiOiJUaWxpbnBhYXRv","cy0yMDE4LnBkZiJ9LHsic291cmNlIjoic3VoZGVfa2F0dGFhIi","widGFyZ2V0IjoidnVvc2lrYXRlXzIwMTgiLCJsYWJlbCI6Imth","dHRhYSIsInNvdXJjZVVybCI6IlRpbGlucGFhdG9zLTIwMTgucG","RmIn0seyJzb3VyY2UiOiJ2dW9zaWthdGVfMjAxOCIsInRhcmdl","dCI6InZ1b3Npa2F0ZV9wb2lzdG9pc3RhXzIwMTgiLCJsYWJlbC","I6ImthdHRhYSIsInNvdXJjZVVybCI6IlRpbGlucGFhdG9zLTIw","MTgucGRmIn0seyJzb3VyY2UiOiJzdWhkZV9rYXR0YWEiLCJ0YX","JnZXQiOiJ2dW9zaWthdGVfMjAyMCIsImxhYmVsIjoia2F0dGFh","Iiwic291cmNlVXJsIjoiVGlsaW5wYWF0b3MtMjAyMC5wZGYifS","x7InNvdXJjZSI6InZ1b3Npa2F0ZV8yMDIwIiwidGFyZ2V0Ijoi","dnVvc2lrYXRlX3BvaXN0b2lzdGFfMjAyMCIsImxhYmVsIjoia2","F0dGFhIiwic291cmNlVXJsIjoiVGlsaW5wYWF0b3MtMjAyMC5w","ZGYifSx7InNvdXJjZSI6ImludmVzdG9pbm5pdF8yMDIxIiwidG","FyZ2V0Ijoic3VoZGVfdmVsa2Fhbm51dHRhYSIsImxhYmVsIjoi","dmVsa2Fhbm51dHRhYSIsInNvdXJjZVVybCI6InRwLTIwMjIta2","lyamEta3ZfdmVyc2lvLnBkZiJ9LHsic291cmNlIjoic3VoZGVf","dmVsa2Fhbm51dHRhYSIsInRhcmdldCI6ImxhaW5hdF9wZXJfYX","N1a2FzXzIwMjMiLCJsYWJlbCI6InZlbGthYW5udXR0YWEiLCJz","b3VyY2VVcmwiOiJUUC0yMDIxLWtpcmphX0tWMDYwNjIwMjIucG","RmIn0seyJzb3VyY2UiOiJ2YWVzdG9fMjAxOCIsInRhcmdldCI6","InN1aGRlX3ZhaWt1dHRhYSIsImxhYmVsIjoidmFpa3V0dGFhIi","wic291cmNlVXJsIjoiVFAtMjAyMS1raXJqYV9LVjA2MDYyMDIy","LnBkZiJ9LHsic291cmNlIjoic3VoZGVfdmFpa3V0dGFhIiwidG","FyZ2V0IjoiaHVvbHRvc3VoZGVfMjAyMSIsImxhYmVsIjoidmFp","a3V0dGFhIiwic291cmNlVXJsIjoiVGlsaW5wYWF0b3MtMjAyMC","5wZGYifSx7InNvdXJjZSI6Imh5dmludm9pbnRpYWx1ZSIsInRh","cmdldCI6InN1aGRlX211dXR0YWEiLCJsYWJlbCI6Im11dXR0YW","EiLCJzb3VyY2VVcmwiOiJ0cC0yMDIzLnBkZiJ9LHsic291cmNl","Ijoic3VoZGVfbXV1dHRhYSIsInRhcmdldCI6InZlcm90dWxvdF","8yMDIzIiwibGFiZWwiOiJtdXV0dGFhIiwic291cmNlVXJsIjoi","dHAtMjAyNC5wZGYifSx7InNvdXJjZSI6InN1aGRlX211dXR0YW","EiLCJ0YXJnZXQiOiJ2YWx0aW9ub3N1dWRldF8yMDIzIiwibGFi","ZWwiOiJtdXV0dGFhIiwic291cmNlVXJsIjoidHAtMjAyMy5wZG","YifSx7InNvdXJjZSI6InN1aGRlX211dXR0YWEiLCJ0YXJnZXQi","OiJ0b2ltaW50YWthdGVfMjAyNCIsImxhYmVsIjoibXV1dHRhYS","IsInNvdXJjZVVybCI6InRwLTIwMjMucGRmIn1dfQ=="],
                c: ["eyJtaXR0YXJpIjoiI2E4NTVmNyIsInN1aGRlIjoiI2VjNDg5OS","IsImx1b2trYSI6IiNmOTczMTYiLCJ5a3NpbMO2IjoiIzA2YjZk","NCJ9"],
                dl: ["W3siaWQiOiJyOHRxenFyc3ciLCJ1cmwiOiJodHRwczovL3d3dy","5sYXVrYWEuZmkvYXN1a2thYXQvd3AtY29udGVudC91cGxvYWRz","L3NpdGVzLzIvMjAyMS8wNi9UaWxpbnBhYXRvcy0yMDE4LnBkZi","J9LHsiaWQiOiJtYTZzZzQ4bW0iLCJ1cmwiOiJodHRwczovL3d3","dy5sYXVrYWEuZmkvYXN1a2thYXQvd3AtY29udGVudC91cGxvYW","RzL3NpdGVzLzIvMjAyMS8wNi9UaWxpbnBhYXRvcy0yMDE5LnBk","ZiJ9LHsiaWQiOiJvcjE4amFuODEiLCJ1cmwiOiJodHRwczovL3","d3dy5sYXVrYWEuZmkvYXN1a2thYXQvd3AtY29udGVudC91cGxv","YWRzL3NpdGVzLzIvMjAyMS8wNi9UaWxpbnBhYXRvcy0yMDIwLn","BkZiJ9LHsiaWQiOiJtZHRhMjRrMTYiLCJ1cmwiOiJodHRwczov","L3d3dy5sYXVrYWEuZmkvYXN1a2thYXQvd3AtY29udGVudC91cG","xvYWRzL3NpdGVzLzIvMjAyMi8wNi9UUC0yMDIxLWtpcmphX0tW","MDYwNjIwMjIucGRmIn0seyJpZCI6IjkyNmg0aHA3ZiIsInVybC","I6Imh0dHBzOi8vd3d3LmxhdWthYS5maS9hc3Vra2FhdC93cC1j","b250ZW50L3VwbG9hZHMvc2l0ZXMvMi8yMDIzLzA2L3RwLTIwMj","Ita2lyamEta3ZfdmVyc2lvLnBkZiJ9LHsiaWQiOiJ6dzgzbnNy","OXEiLCJ1cmwiOiJodHRwczovL3d3dy5sYXVrYWEuZmkvYXN1a2","thYXQvd3AtY29udGVudC91cGxvYWRzL3NpdGVzLzIvMjAyNC8w","NS90cC0yMDIzLnBkZiJ9LHsiaWQiOiJmOWZ3enN6ZGciLCJ1cm","wiOiJodHRwczovL3d3dy5sYXVrYWEuZmkvYXN1a2thYXQvd3At","Y29udGVudC91cGxvYWRzL3NpdGVzLzIvMjAyNS8wNC90cC0yMD","I0LnBkZiJ9XQ=="],
                sr: ["W10="]
            };

            function _dec(a) {
                return JSON.parse(decodeURIComponent(atob(a.join('')).split('').map(function(c) {
                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                }).join('')));
            }

            const data = _dec(_enc.d);
            const colorMap = _dec(_enc.c);
            const docLinks = _dec(_enc.dl);
            const scrapedResults = _dec(_enc.sr);

            document.getElementById('sum-p').innerText = '"' + data.summary + '"';

            function resolveSourceUrl(source) {
                if (!source) return null;
                const s = source.trim();
                
                function stripTrailingNumbers(str) {
                    return str.replace(/(.(pdf|html|txt|docx|doc|xls|xlsx|png|jpg|jpeg))d+$/i, '$1');
                }

                // 0. Numbered reference check (e.g. "Lähde nro. 1")
                const numberedMatch = s.match(/(?:Lähde|Source)s+nro.?s*(d+)/i);
                if (numberedMatch) {
                    const idx = parseInt(numberedMatch[1], 10) - 1;
                    const validDocs = docLinks.filter(d => d.url.trim());
                    if (idx >= 0 && idx < validDocs.length) return validDocs[idx].url;
                    const scIdx = idx - validDocs.length;
                    if (scIdx >= 0 && scIdx < scrapedResults.length) return scrapedResults[scIdx].url;
                }

                if (s.startsWith('http')) {
                    if (docLinks.find(d => d.url === s)) return s;
                    if (scrapedResults.find(r => r.url === s)) return s;
                    const cleanedUrl = stripTrailingNumbers(s);
                    if (docLinks.find(d => d.url === cleanedUrl)) return cleanedUrl;
                    const scrapedMatch = scrapedResults.find(r => r.url === cleanedUrl);
                    if (scrapedMatch) return scrapedMatch.url;
                    return s;
                }

                const clean = stripTrailingNumbers(s).toLowerCase();
                
                const docMatch = docLinks.find(d => {
                    try {
                        const u = new URL(d.url);
                        const filename = (u.pathname.split('/').pop() || "").toLowerCase();
                        if (filename === clean || stripTrailingNumbers(filename) === clean) return true;
                        return d.url.toLowerCase().includes(clean);
                    } catch(e) { return d.url.toLowerCase().includes(clean); }
                });
                if (docMatch) return docMatch.url;
                
                const scrapeMatch = scrapedResults.find(r => {
                    try {
                        const u = new URL(r.url);
                        const filename = (u.pathname.split('/').pop() || "").toLowerCase() || r.title.toLowerCase();
                        if (filename === clean || stripTrailingNumbers(filename) === clean) return true;
                        return r.url.toLowerCase().includes(clean) || r.title.toLowerCase().includes(clean);
                    } catch(e) { return r.url.toLowerCase().includes(clean) || r.title.toLowerCase().includes(clean); }
                });
                if (scrapeMatch) return scrapeMatch.url;
                
                return null;
            }

            function showInfo(d) {
                document.getElementById("info").style.display = "block";
                document.getElementById("info-title").innerText = d.label;
                document.getElementById("info-type").innerText = d.type;
                document.getElementById("info-desc").innerText = d.description || "Ei kuvausta saatavilla.";
                
                const sourceEl = document.getElementById("info-source");
                const sourceTitle = document.getElementById("info-sources-title");
                
                // Root mindmap section
                const existingMindmap = document.getElementById("info-mindmap");
                if (existingMindmap) existingMindmap.remove();

                if (d.mindmap && d.mindmap.length > 0) {
                    const mmDiv = document.createElement("div");
                    mmDiv.id = "info-mindmap";
                    mmDiv.style.cssText = "margin-top: 20px; padding-top: 20px; border-top: 1px solid #f1f5f9;";
                    mmDiv.innerHTML = '<div style="font-size: 11px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin-bottom: 12px;">Ajatuskartta / Alisolmut</div>';
                    
                    const mmCont = document.createElement("div");
                    mmCont.style.cssText = "display: flex; flex-direction: column; gap: 10px;";
                    
                    d.mindmap.forEach(sub => {
                        const item = document.createElement("div");
                        item.style.cssText = "background: #f8fafc; padding: 12px; border-radius: 12px; border: 1px solid #f1f5f9;";
                        item.innerHTML = `
                            <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 4px;">
                                <div style="width: 6px; height: 6px; border-radius: 50%; background: #6366f1;"></div>
                                <span style="font-weight: 800; font-size: 12px; color: #1e293b;">${sub.label}</span>
                                ${sub.type ? `<span style="font-size: 9px; padding: 2px 6px; background: #e2e8f0; color: #64748b; border-radius: 4px; font-weight: 800;">${sub.type}</span>` : ''}
                            </div>
                            <p style="margin: 0; font-size: 11px; color: #475569; line-height: 1.5;">${sub.description || ''}</p>
                        `;
                        mmCont.appendChild(item);
                    });
                    mmDiv.appendChild(mmCont);
                    document.getElementById("info-desc").after(mmDiv);
                }

                if (d.source) {
                    const sources = d.source.split(',').map(s => s.trim()).filter(s => s);
                    if (sources.length > 0) {
                        sourceTitle.style.display = "block";
                        const links = sources.map(s => {
                            const url = resolveSourceUrl(s);
                            if (url) {
                                return '<a href="' + url + '" target="_blank" style="color: #4f46e5; text-decoration: underline; font-size: 12px; font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">' + s + '</a>';
                            }
                            return '<span style="font-size: 12px; color: #64748b;">• ' + s + '</span>';
                        });
                        sourceEl.innerHTML = links.join('');
                    } else {
                        sourceTitle.style.display = "none";
                        sourceEl.innerHTML = "";
                    }
                } else {
                    sourceTitle.style.display = "none";
                    sourceEl.innerHTML = "";
                }
            }

            function getEntityColor(type) {
                const t = type ? type.trim().toLowerCase() : '';
                if (colorMap && colorMap[t]) return colorMap[t];
                if (t.includes('henkil') || t.includes('person') || t.includes('ihminen')) return '#10b981';
                if (t.includes('organisaatio') || t.includes('organization') || t.includes('yhtiö') || t.includes('yritys') || t.includes('yhteisö') || t.includes('company')) return '#3b82f6';
                return '#f59e0b';
            }

            if (true) {
                const container = document.getElementById('timeline-content');
                const sortedNodes = [...data.nodes].sort((a, b) => (a.order || 0) - (b.order || 0));
                
                sortedNodes.forEach((node, index) => {
                    const item = document.createElement('div');
                    item.className = 'timeline-item';
                    
                    const dot = document.createElement('div');
                    dot.className = 'timeline-dot';
                    dot.style.borderColor = getEntityColor(node.type);
                    dot.onclick = () => showInfo(node);
                    
                    const card = document.createElement('div');
                    card.className = 'timeline-card';
                    card.onclick = () => showInfo(node);
                    card.innerHTML = `
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px; align-items: center;">
                            <span style="font-size: 10px; font-weight: 800; color: ${getEntityColor(node.type)}; text-transform: uppercase; letter-spacing: 0.05em;">${node.date || 'Vaihe ' + (index + 1)}</span>
                            <span style="font-size: 9px; font-weight: 800; color: #94a3b8; text-transform: uppercase; background: #f8fafc; padding: 2px 6px; border-radius: 4px;">${node.type}</span>
                        </div>
                        <h4 style="margin: 0 0 8px 0; color: #0f172a; font-size: 16px;">${node.label}</h4>
                        <p style="margin: 0; font-size: 13px; color: #475569; line-height: 1.5;">${node.description || ''}</p>
                    `;
                    
                    item.appendChild(dot);
                    item.appendChild(card);
                    
                    const nextNode = sortedNodes[index + 1];
                    if (nextNode) {
                        const edge = data.edges.find(e => e.source === node.id && e.target === nextNode.id);
                        if (edge) {
                            const change = document.createElement('div');
                            change.className = 'timeline-change';
                            change.innerText = "→ " + edge.label;
                            item.appendChild(change);
                        }
                    }
                    container.appendChild(item);
                });
            } else {
                const legCont = document.getElementById('leg-cont');
                Object.entries(colorMap).slice(0, 10).forEach(([type, color]) => {
                    const div = document.createElement('div');
                    div.style.cssText = "display: flex; align-items: center; gap: 8px; margin-bottom: 8px;";
                    div.innerHTML = `<div style="width: 10px; height: 10px; border-radius: 50%; background: ${color}; flex-shrink: 0;"></div><span style="font-weight: 600; text-transform: capitalize; color: #334155;">${type}</span>`;
                    legCont.appendChild(div);
                });

                let width = window.innerWidth;
                let height = window.innerHeight;
                let drillDownNodeId = null;

                const backBtn = document.getElementById('back-btn');
                if (backBtn) {
                    backBtn.addEventListener('mouseover', () => backBtn.style.background = '#f8fafc');
                    backBtn.addEventListener('mouseout', () => backBtn.style.background = 'rgba(255, 255, 255, 0.95)');
                    backBtn.onclick = () => {
                        drillDownNodeId = null;
                        backBtn.style.display = 'none';
                        renderGraph();
                    };
                }

                window.addEventListener('resize', () => {
                    width = window.innerWidth;
                    height = window.innerHeight;
                    const svg = d3.select("#graph svg");
                    if (!svg.empty()) {
                        svg.attr("width", width).attr("height", height);
                    }
                });

                function getDisplayData() {
                    if (!drillDownNodeId) return data;
                    const rootNode = data.nodes.find(n => n.id === drillDownNodeId);
                    if (!rootNode || !rootNode.mindmap) return data;

                    const nodes = [
                        Object.assign({}, rootNode, { mindmap: [] }),
                        ...rootNode.mindmap.map(m => ({
                            id: m.id,
                            label: m.label,
                            description: m.description,
                            type: m.type || 'Subconcept',
                            source: m.source
                        }))
                    ];
                    const edges = rootNode.mindmap.map(m => ({
                        source: rootNode.id,
                        target: m.id,
                        label: 'laajennus'
                    }));
                    return { nodes, edges };
                }

                function renderGraph() {
                    const graphContainer = document.getElementById('graph');
                    const oldSvg = graphContainer.querySelector('svg');
                    if (oldSvg) oldSvg.remove();

                    if (drillDownNodeId && backBtn) {
                        backBtn.style.display = 'block';
                    }

                    const renderData = getDisplayData();
                    // Copy data because D3 mutates nodes/edges
                    const nodesData = JSON.parse(JSON.stringify(renderData.nodes));
                    const edgesData = JSON.parse(JSON.stringify(renderData.edges));

                    const svg = d3.select("#graph").append("svg")
                        .attr("width", width)
                        .attr("height", height)
                        .call(d3.zoom().scaleExtent([0.1, 8]).on("zoom", (event) => g.attr("transform", event.transform)));

                    const g = svg.append("g");

                    svg.append("defs").append("marker")
                        .attr("id", "arrowhead")
                        .attr("viewBox", "-0 -5 10 10")
                        .attr("refX", 25)
                        .attr("refY", 0)
                        .attr("orient", "auto")
                        .attr("markerWidth", 6)
                        .attr("markerHeight", 6)
                        .attr("xoverflow", "visible")
                        .append("svg:path")
                        .attr("d", "M 0,-5 L 10 ,0 L 0,5")
                        .attr("fill", "#cbd5e1");

                    const simulation = d3.forceSimulation(nodesData)
                        .force("link", d3.forceLink(edgesData).id(d => d.id).distance(180))
                        .force("charge", d3.forceManyBody().strength(-600))
                        .force("center", d3.forceCenter(width / 2, height / 2))
                        .force("x", d3.forceX(width / 2).strength(0.07))
                        .force("y", d3.forceY(height / 2).strength(0.07))
                        .force("collision", d3.forceCollide().radius(70));

                    const link = g.append("g").selectAll("line")
                        .data(edgesData).enter().append("line")
                        .attr("class", "link")
                        .attr("marker-end", "url(#arrowhead)");

                    const linkLabels = g.append("g").selectAll("text")
                        .data(edgesData).enter().append("text")
                        .attr("class", "link-label")
                        .text(d => d.label);

                    const node = g.append("g").selectAll("g")
                        .data(nodesData).enter().append("g")
                        .attr("class", "node-group")
                        .style("cursor", "pointer")
                        .on("click", (event, d) => showInfo(d))
                        .call(d3.drag()
                            .on("start", (e, d) => { if (!e.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; })
                            .on("drag", (e, d) => { d.fx = e.x; d.fy = e.y; })
                            .on("end", (e, d) => { if (!e.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; }));

                    node.append("circle")
                        .attr("class", "node")
                        .attr("r", 24)
                        .attr("fill", d => getEntityColor(d.type))
                        .attr("stroke", "#fff")
                        .attr("stroke-width", 3);

                    node.append("text")
                        .attr("class", "label")
                        .attr("text-anchor", "middle")
                        .attr("dy", 42)
                        .text(d => d.label);

                    // Add drill-down icons
                    nodesData.forEach(d => {
                        const origNode = data.nodes.find(n => n.id === d.id);
                        if (origNode && origNode.mindmap && origNode.mindmap.length > 0 && !drillDownNodeId) {
                            const nodeG = node.filter(n => n.id === d.id);
                            const badge = nodeG.append("g")
                                .attr("transform", "translate(15, -15)")
                                .style("cursor", "pointer")
                                .on("click", (event, n) => {
                                    event.stopPropagation();
                                    drillDownNodeId = n.id;
                                    renderGraph();
                                });

                            badge.append("circle")
                                .attr("r", 10)
                                .attr("fill", "#6366f1")
                                .attr("stroke", "white")
                                .attr("stroke-width", 2);

                            badge.append("text")
                                .text("+")
                                .attr("fill", "white")
                                .attr("font-size", "14px")
                                .attr("font-weight", "bold")
                                .attr("text-anchor", "middle")
                                .attr("dy", "5px");
                        }
                    });

                    simulation.on("tick", () => {
                        link.attr("x1", d => d.source.x).attr("y1", d => d.source.y)
                            .attr("x2", d => d.target.x).attr("y2", d => d.target.y);
                        linkLabels.attr("x", d => (d.source.x + d.target.x) / 2).attr("y", d => (d.source.y + d.target.y) / 2);
                        node.attr("transform", d => "translate(" + d.x + "," + d.y + ")");
                    });
                }

                renderGraph();
            }

            // Populate search dropdowns
            function populateSearchSelects() {
                const selA = document.getElementById("search-a");
                const selB = document.getElementById("search-b");
                if(!selA || !selB) return;
                
                let mainGroupA = '<optgroup label="Pääkäsitteet">';
                let mainGroupB = '<optgroup label="Pääkäsitteet">';
                let subGroupA = '<optgroup label="Alakäsitteet (Mindmap)">';
                let subGroupB = '<optgroup label="Alakäsitteet (Mindmap)">';
                
                data.nodes.forEach(n => {
                    mainGroupA += '<option value="' + n.id + '">' + n.label + '</option>';
                    mainGroupB += '<option value="' + n.id + '">' + n.label + '</option>';
                    if(n.mindmap) {
                        n.mindmap.forEach(m => {
                            subGroupA += '<option value="' + m.id + '">' + m.label + '</option>';
                            subGroupB += '<option value="' + m.id + '">' + m.label + '</option>';
                        });
                    }
                });
                
                mainGroupA += '</optgroup>'; mainGroupB += '</optgroup>';
                subGroupA += '</optgroup>'; subGroupB += '</optgroup>';
                
                const html = '<option value="">-- Valitse solmu --</option>' + mainGroupA + subGroupA;
                selA.innerHTML = html;
                selB.innerHTML = html;
            }
            populateSearchSelects();
            
            window.toggleSearchPanel = function() {
                const p = document.getElementById('search-panel');
                p.style.display = p.style.display === 'block' ? 'none' : 'block';
            };
            
            window.updateSearchUI = function() {
                const valA = document.getElementById("search-a").value;
                const valB = document.getElementById("search-b").value;
                document.getElementById("do-search-btn").disabled = !(valA && valB);
                
                const adjacencyList = new Map();
                data.nodes.forEach(n => {
                    if (n.mindmap) {
                        n.mindmap.forEach(m => {
                            if (!adjacencyList.has(n.id)) adjacencyList.set(n.id, []);
                            adjacencyList.get(n.id).push(m.id);
                            if (!adjacencyList.has(m.id)) adjacencyList.set(m.id, []);
                            adjacencyList.get(m.id).push(n.id);
                        });
                    }
                });
                data.edges.forEach(e => {
                    const srcId = typeof e.source === 'object' ? e.source.id : e.source;
                    const tgtId = typeof e.target === 'object' ? e.target.id : e.target;
                    if (!adjacencyList.has(srcId)) adjacencyList.set(srcId, []);
                    adjacencyList.get(srcId).push(tgtId);
                    if (!adjacencyList.has(tgtId)) adjacencyList.set(tgtId, []);
                    adjacencyList.get(tgtId).push(srcId);
                });

                function getReachable(startId) {
                    if(!startId) return null;
                    const visited = new Set();
                    const queue = [{id: startId, d: 0}];
                    visited.add(startId);
                    while(queue.length > 0) {
                        const cur = queue.shift();
                        if(cur.d >= 6) continue;
                        const neighbors = adjacencyList.get(cur.id) || [];
                        for(const n of neighbors) {
                            if(!visited.has(n)) {
                                visited.add(n);
                                queue.push({id: n, d: cur.d + 1});
                            }
                        }
                    }
                    return visited;
                }

                const reachA = getReachable(valA);
                const reachB = getReachable(valB);
                
                const optsA = document.getElementById("search-a").options;
                const optsB = document.getElementById("search-b").options;
                
                for(let i=0; i<optsA.length; i++) {
                    const v = optsA[i].value;
                    if(v === "") continue;
                    let show = true;
                    if (reachB && !reachB.has(v) && v !== valA) show = false;
                    optsA[i].style.display = show ? "" : "none";
                    optsA[i].disabled = (!show) || (v === valB && valB !== "");
                }
                for(let i=0; i<optsB.length; i++) {
                    const v = optsB[i].value;
                    if(v === "") continue;
                    let show = true;
                    if (reachA && !reachA.has(v) && v !== valB) show = false;
                    optsB[i].style.display = show ? "" : "none";
                    optsB[i].disabled = (!show) || (v === valA && valA !== "");
                }
            };
            
            window.clearSearch = function() {
                document.getElementById("search-a").value = "";
                document.getElementById("search-b").value = "";
                document.getElementById("search-results").style.display = "none";
                updateSearchUI();
            };
            
            window.executeSearch = function() {
                const valA = document.getElementById("search-a").value;
                const valB = document.getElementById("search-b").value;
                if(!valA || !valB) return;
                
                const allNodesArray = [];
                const adjacencyList = new Map();

                data.nodes.forEach(n => {
                    allNodesArray.push(n);
                    if (n.mindmap) {
                        n.mindmap.forEach(m => {
                            allNodesArray.push(m);
                            
                            if (!adjacencyList.has(n.id)) adjacencyList.set(n.id, []);
                            adjacencyList.get(n.id).push({ target: m.id, label: 'laajennus' });
                            
                            if (!adjacencyList.has(m.id)) adjacencyList.set(m.id, []);
                            adjacencyList.get(m.id).push({ target: n.id, label: 'laajennus (käänteinen)' });
                        });
                    }
                });

                data.edges.forEach(e => {
                    const srcId = typeof e.source === 'object' ? e.source.id : e.source;
                    const tgtId = typeof e.target === 'object' ? e.target.id : e.target;
                    
                    if (!adjacencyList.has(srcId)) adjacencyList.set(srcId, []);
                    adjacencyList.get(srcId).push({ target: tgtId, label: e.label });

                    if (!adjacencyList.has(tgtId)) adjacencyList.set(tgtId, []);
                    adjacencyList.get(tgtId).push({ target: srcId, label: e.label + ' (käänteinen)' });
                });

                const queue = [];
                const visited = new Set();

                queue.push({ id: valA, path: [{ id: valA }] });
                visited.add(valA);

                let foundPath = null;
                const maxDepth = 6;

                while (queue.length > 0) {
                    const current = queue.shift();
                    if (current.id === valB) { foundPath = current.path; break; }
                    if (current.path.length > maxDepth) continue;

                    const neighbors = adjacencyList.get(current.id) || [];
                    for (const neighbor of neighbors) {
                        if (!visited.has(neighbor.target)) {
                            visited.add(neighbor.target);
                            queue.push({
                                id: neighbor.target,
                                path: [...current.path, { id: neighbor.target, edgeLabel: neighbor.label }]
                            });
                        }
                    }
                }
                
                const resEl = document.getElementById("search-results");
                resEl.style.display = "block";
                
                if (foundPath) {
                    const pathNodes = foundPath.map(p => allNodesArray.find(n => n.id === p.id)).filter(Boolean);
                    let html = '<h4 style="font-size: 10px; font-weight: 800; color: #4f46e5; text-transform: uppercase; margin-bottom: 8px;">Löytynyt yhteys (Syvyys: ' + (pathNodes.length - 1) + ')</h4>';
                    html += '<div style="max-height: 200px; overflow-y: auto; padding-right: 4px;">';
                    
                    for(let i=0; i<pathNodes.length; i++) {
                        const n = pathNodes[i];
                        const color = getEntityColor(n.type);
                        html += '<div style="margin-bottom: 4px;">';
                        html += '<div style="display: flex; align-items: center; gap: 8px;">';
                        html += '<div style="width: 8px; height: 8px; border-radius: 50%; background: ' + color + ';"></div>';
                        html += '<span style="font-size: 12px; font-weight: bold; color: #1e293b;">' + n.label + '</span>';
                        html += '</div>';
                        
                        if (i < foundPath.length - 1) {
                            const edgeLabel = foundPath[i+1].edgeLabel || 'yhteys';
                            html += '<div style="margin-left: 3px; border-left: 2px solid #e0e7ff; padding-left: 14px; padding-top: 4px; padding-bottom: 4px; margin-top: 4px; margin-bottom: 4px;">';
                            html += '<span style="font-size: 10px; font-weight: bold; color: #6366f1; background: #eef2ff; padding: 2px 6px; border-radius: 6px; word-break: break-all;">' + edgeLabel + '</span>';
                            html += '</div>';
                        }
                        html += '</div>';
                    }
                    html += '</div>';
                    resEl.innerHTML = html;
                } else {
                    resEl.innerHTML = '<div style="font-size: 12px; color: #ef4444; font-weight: bold; padding: 10px; background: #fef2f2; border-radius: 8px;">Yhteyttä ei löytynyt annettujen solmujen välillä (maksimisyvyys 6).</div>';
                }
            };
        })();
    </script>
</body>
</html>